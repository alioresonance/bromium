2018-07-11 09:16:44.507 [main] INFO  com.hribol.bromium.cli.Main - Running CLI with arguments [replay, -a, /home/hvrigazov/work/testing-scipts/bromium-docker/fh/bm_8.4.0-SNAPSHOT.brm, -u, http://localhost:8180/, -c, ./fas-set-variable.txt]
2018-07-11 09:16:46.971 [main] INFO  com.hribol.bromium.common.generation.replay.ReplayingJavascriptGenerator - Generation took 20ms
2018-07-11 09:16:46.972 [main] INFO  com.hribol.bromium.cli.DefaultModule - var Arrive=function(a,b,c){"use strict";function l(a,b,c){e.addMethod(b,c,a.unbindEvent),e.addMethod(b,c,a.unbindEventWithSelectorOrCallback),e.addMethod(b,c,a.unbindEventWithSelectorAndCallback)}function m(a){a.arrive=j.bindEvent,l(j,a,"unbindArrive"),a.leave=k.bindEvent,l(k,a,"unbindLeave")}if(a.MutationObserver&&"undefined"!=typeof HTMLElement){var d=0,e=function(){var b=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(a,c){return a instanceof HTMLElement&&b.call(a,c)},addMethod:function(a,b,c){var d=a[b];a[b]=function(){return c.length==arguments.length?c.apply(this,arguments):"function"==typeof d?d.apply(this,arguments):void 0}},callCallbacks:function(a){for(var c,b=0;c=a[b];b++)c.callback.call(c.elem)},checkChildNodesRecursively:function(a,b,c,d){for(var g,f=0;g=a[f];f++)c(g,b,d)&&d.push({callback:b.callback,elem:g}),g.childNodes.length>0&&e.checkChildNodesRecursively(g.childNodes,b,c,d)},mergeArrays:function(a,b){var d,c={};for(d in a)c[d]=a[d];for(d in b)c[d]=b[d];return c},toElementsArray:function(b){return"undefined"==typeof b||"number"==typeof b.length&&b!==a||(b=[b]),b}}}(),f=function(){var a=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return a.prototype.addEvent=function(a,b,c,d){var e={target:a,selector:b,options:c,callback:d,firedElems:[]};return this._beforeAdding&&this._beforeAdding(e),this._eventsBucket.push(e),e},a.prototype.removeEvent=function(a){for(var c,b=this._eventsBucket.length-1;c=this._eventsBucket[b];b--)a(c)&&(this._beforeRemoving&&this._beforeRemoving(c),this._eventsBucket.splice(b,1))},a.prototype.beforeAdding=function(a){this._beforeAdding=a},a.prototype.beforeRemoving=function(a){this._beforeRemoving=a},a}(),g=function(b,d){var g=new f,h=this,i={fireOnAttributesModification:!1};return g.beforeAdding(function(c){var i,e=c.target;c.selector,c.callback;(e===a.document||e===a)&&(e=document.getElementsByTagName("html")[0]),i=new MutationObserver(function(a){d.call(this,a,c)});var j=b(c.options);i.observe(e,j),c.observer=i,c.me=h}),g.beforeRemoving(function(a){a.observer.disconnect()}),this.bindEvent=function(a,b,c){b=e.mergeArrays(i,b);for(var d=e.toElementsArray(this),f=0;f<d.length;f++)g.addEvent(d[f],a,b,c)},this.unbindEvent=function(){var a=e.toElementsArray(this);g.removeEvent(function(b){for(var d=0;d<a.length;d++)if(this===c||b.target===a[d])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(a){var f,b=e.toElementsArray(this),d=a;f="function"==typeof a?function(a){for(var e=0;e<b.length;e++)if((this===c||a.target===b[e])&&a.callback===d)return!0;return!1}:function(d){for(var e=0;e<b.length;e++)if((this===c||d.target===b[e])&&d.selector===a)return!0;return!1},g.removeEvent(f)},this.unbindEventWithSelectorAndCallback=function(a,b){var d=e.toElementsArray(this);g.removeEvent(function(e){for(var f=0;f<d.length;f++)if((this===c||e.target===d[f])&&e.selector===a&&e.callback===b)return!0;return!1})},this},h=function(){function h(a){var b={attributes:!1,childList:!0,subtree:!0};return a.fireOnAttributesModification&&(b.attributes=!0),b}function i(a,b){a.forEach(function(a){var c=a.addedNodes,d=a.target,f=[];null!==c&&c.length>0?e.checkChildNodesRecursively(c,b,k,f):"attributes"===a.type&&k(d,b,f)&&f.push({callback:b.callback,elem:node}),e.callCallbacks(f)})}function k(a,b,f){if(e.matchesSelector(a,b.selector)&&(a._id===c&&(a._id=d++),-1==b.firedElems.indexOf(a._id))){if(b.options.onceOnly){if(0!==b.firedElems.length)return;b.me.unbindEventWithSelectorAndCallback.call(b.target,b.selector,b.callback)}b.firedElems.push(a._id),f.push({callback:b.callback,elem:a})}}var f={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};j=new g(h,i);var l=j.bindEvent;return j.bindEvent=function(a,b,c){"undefined"==typeof c?(c=b,b=f):b=e.mergeArrays(f,b);var d=e.toElementsArray(this);if(b.existing){for(var g=[],h=0;h<d.length;h++)for(var i=d[h].querySelectorAll(a),j=0;j<i.length;j++)g.push({callback:c,elem:i[j]});if(b.onceOnly&&g.length)return c.call(g[0].elem);setTimeout(e.callCallbacks,1,g)}l.call(this,a,b,c)},j},i=function(){function d(a){var b={childList:!0,subtree:!0};return b}function f(a,b){a.forEach(function(a){var c=a.removedNodes,f=(a.target,[]);null!==c&&c.length>0&&e.checkChildNodesRecursively(c,b,h,f),e.callCallbacks(f)})}function h(a,b){return e.matchesSelector(a,b.selector)}var c={};k=new g(d,f);var i=k.bindEvent;return k.bindEvent=function(a,b,d){"undefined"==typeof d?(d=b,b=c):b=e.mergeArrays(c,b),i.call(this,a,b,d)},k},j=new h,k=new i;b&&m(b.fn),m(HTMLElement.prototype),m(NodeList.prototype),m(HTMLCollection.prototype),m(HTMLDocument.prototype),m(Window.prototype);var n={};return l(j,n,"unbindAllArrive"),l(k,n,"unbindAllLeave"),n}}(window,"undefined"==typeof jQuery?null:jQuery,void 0);

window.bromium = {};

window.bromium.whenTextChanges = function (element, callback) {
    var observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            callback(mutation.target.innerText);
        });
    });

    var config = {characterData: true, subtree: true, childList: true};
    observer.observe(element, config);
};

window.bromium.notifySatisfiedBasedOnText = function (element, textTarget, condition) {
    if (element.innerText.trim() === textTarget) {
        bromium.notifySatisfiedCondition(condition);
    }

    bromium.whenTextChanges(element, function (text) {
       if (text.trim() === textTarget) {
          bromium.notifySatisfiedCondition(condition);
       }
  })
};

window.bromium.notifySatisfiedCondition = function(condition) {
    bromium.notifyCondition("http://bromium-condition-satisfied.com/", condition);
};

window.bromium.notifyNotSatisfiedCondition = function(condition) {
    bromium.notifyCondition("http://bromium-condition-not-satisfied.com/", condition);
};

window.bromium.notifyCondition = function(url, condition) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url + '?' + condition);
    xhr.send();
};

var options = {
    existing: true,
    fireOnAttributesModification: true,
    onceOnly: false
};

var substitutionOptions = {
    existing: true,
    fireOnAttributesModification: true,
    onceOnly: true
}

window.bromium.substitutions = {};
window.bromium.substitutionHandlers = {};

window.bromium.subscribeForSubstitutionRegistration = function(variableName, callback) {
    if (!bromium.substitutionHandlers[variableName]) {
        bromium.substitutionHandlers[variableName] = [];
    }

    bromium.substitutionHandlers[variableName].push(callback);
};

window.bromium.registerSubstitution = function(variable, step, substitution) {
    var substitutionValue = '{{' + variable + '@' + step + '}}';
    console.log('Substitution: ' + substitutionValue + " => " + substitution);
    bromium.substitutions[substitutionValue] = substitution;
    bromium.emitAllSubstitutions(substitutionValue, substitution);
    bromium.sendSubstitutionRegistration(substitutionValue + '=' + substitution);
}

window.bromium.emitAllSubstitutions = function(substitutionValue, substitution) {
    bromium.substitutionHandlers[substitutionValue].forEach(function(handler) {
        handler(substitution);
    });
};

window.bromium.sendSubstitutionRegistration = function(substitution) {
    bromium.notifyCondition("http://bromium-register-substitution.com/", substitution);
};


window.bromium.stepHandlers = {};
window.bromium.onStep = function(step, callback) {
    bromium.stepHandlers[step] = callback;
};

window.bromium.triggerStep = function(step) {
    console.log('Triggering step');
    bromium.stepHandlers[step]();
};






function TypeTextInElementFoundByCssSelector(selector, text, hashCode) {
	document.arrive(selector, options, function () {
		bromium.notifySatisfiedCondition(hashCode);
	});
}
TypeTextInElementFoundByCssSelector("#user", "admin", "-1472679530");




TypeTextInElementFoundByCssSelector("#pass", "admin", "1496341852");




function ClickCssSelector(selector, hashCode) {
	document.arrive(selector, options, function () {
		bromium.notifySatisfiedCondition(hashCode);
	});
}

ClickCssSelector("#loginButton", "1677560286");

function ElementByCssToBePresent(selector, hashcode) {
	document.arrive(selector, options, function () {
		bromium.notifySatisfiedCondition(hashcode);
	});
}
ElementByCssToBePresent("#main-container", "-1537874403");







ClickCssSelector("#toolbar div[title='New']", "476620768");




TypeTextInElementFoundByCssSelector(".entity-name > input", "test1", "1904797301");




ClickCssSelector(".select-scope.bm-button", "-951467759");




ClickCssSelector("input[data-id='catalog01/en_GB']", "-1386322911");




function ClickDataId(dataId, hashCode) {
    //TODO: similar logic should be present in other actions as well
    if (dataId.startsWith('{{')) {
        bromium.subscribeForSubstitutionRegistration(dataId, function(substitutionValue) {
            document.arrive('input[data-id="' + substitutionValue + '"]', options, function () {
                bromium.notifySatisfiedCondition(hashCode);
            });
        });
    } else {
        document.arrive('input[data-id="' + dataId + '"]', options, function () {
            bromium.notifySatisfiedCondition(hashCode);
        });
	}
}

ClickDataId("catalog01/en_GB", "1145601417");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




ClickCssSelector("#toolbar-edit .save-button", "714065339");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector(".advanced-view-button", "708107319");




function SetVariableToTextOfElementWithCssSelector(variable, selector, step, hashcode) {
    bromium.onStep(step, function() {
        console.log('Handler for step ' + step + ' was triggered!');
    	document.arrive(selector, substitutionOptions, function () {
            var substitution = this.innerText.trim();
            bromium.registerSubstitution(variable, step, substitution);
    	});
    });

}
SetVariableToTextOfElementWithCssSelector("entityId", ".entity-id", "14", "-1660794812");




ClickCssSelector("#toolbar-edit .send-for-publication-button", "1181916053");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector("#toolbar div[title='New']", "476620768");




TypeTextInElementFoundByCssSelector(".entity-name > input", "test2", "1904797302");




ClickCssSelector(".select-scope.bm-button", "-951467759");




ClickCssSelector("input[data-id='catalog01/en_GB']", "-1386322911");




ClickDataId("catalog01/en_GB", "1145601417");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




ClickCssSelector("#toolbar-edit .save-button", "714065339");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector(".advanced-view-button", "708107319");




SetVariableToTextOfElementWithCssSelector("entityId", ".entity-id", "26", "-1660794812");




ClickCssSelector("#toolbar-edit .send-for-publication-button", "1181916053");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector("input[name='searchText']", "2046246679");




TypeTextInElementFoundByCssSelector("input[name='searchText']", "test", "2074416986");




ClickCssSelector(".search-button", "1849439727");




function ClickClassByText(initialCollectorClass, text, hashCode) {
	document.arrive("." + initialCollectorClass, options, function () {
		bromium.notifySatisfiedBasedOnText(this, text, hashCode);
	});
}
ClickClassByText("menu-bar-tab", "PUBLICATION", "2083545669");




ClickClassByText("menu-bar-tab", "PUBLICATION", "2083545669");




ClickDataId("{{entityId@14}}", "1840643090");




ClickCssSelector(".publish-button", "465411512");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




ClickDataId("{{entityId@26}}", "1840674803");




ClickCssSelector(".publish-button", "465411512");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




2018-07-11 09:16:47.036 [main] INFO  com.hribol.bromium.common.generation.replay.ReplayingJavascriptGenerator - Generation took 5ms
2018-07-11 09:16:47.037 [main] INFO  com.hribol.bromium.cli.DefaultModule - var Arrive=function(a,b,c){"use strict";function l(a,b,c){e.addMethod(b,c,a.unbindEvent),e.addMethod(b,c,a.unbindEventWithSelectorOrCallback),e.addMethod(b,c,a.unbindEventWithSelectorAndCallback)}function m(a){a.arrive=j.bindEvent,l(j,a,"unbindArrive"),a.leave=k.bindEvent,l(k,a,"unbindLeave")}if(a.MutationObserver&&"undefined"!=typeof HTMLElement){var d=0,e=function(){var b=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(a,c){return a instanceof HTMLElement&&b.call(a,c)},addMethod:function(a,b,c){var d=a[b];a[b]=function(){return c.length==arguments.length?c.apply(this,arguments):"function"==typeof d?d.apply(this,arguments):void 0}},callCallbacks:function(a){for(var c,b=0;c=a[b];b++)c.callback.call(c.elem)},checkChildNodesRecursively:function(a,b,c,d){for(var g,f=0;g=a[f];f++)c(g,b,d)&&d.push({callback:b.callback,elem:g}),g.childNodes.length>0&&e.checkChildNodesRecursively(g.childNodes,b,c,d)},mergeArrays:function(a,b){var d,c={};for(d in a)c[d]=a[d];for(d in b)c[d]=b[d];return c},toElementsArray:function(b){return"undefined"==typeof b||"number"==typeof b.length&&b!==a||(b=[b]),b}}}(),f=function(){var a=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return a.prototype.addEvent=function(a,b,c,d){var e={target:a,selector:b,options:c,callback:d,firedElems:[]};return this._beforeAdding&&this._beforeAdding(e),this._eventsBucket.push(e),e},a.prototype.removeEvent=function(a){for(var c,b=this._eventsBucket.length-1;c=this._eventsBucket[b];b--)a(c)&&(this._beforeRemoving&&this._beforeRemoving(c),this._eventsBucket.splice(b,1))},a.prototype.beforeAdding=function(a){this._beforeAdding=a},a.prototype.beforeRemoving=function(a){this._beforeRemoving=a},a}(),g=function(b,d){var g=new f,h=this,i={fireOnAttributesModification:!1};return g.beforeAdding(function(c){var i,e=c.target;c.selector,c.callback;(e===a.document||e===a)&&(e=document.getElementsByTagName("html")[0]),i=new MutationObserver(function(a){d.call(this,a,c)});var j=b(c.options);i.observe(e,j),c.observer=i,c.me=h}),g.beforeRemoving(function(a){a.observer.disconnect()}),this.bindEvent=function(a,b,c){b=e.mergeArrays(i,b);for(var d=e.toElementsArray(this),f=0;f<d.length;f++)g.addEvent(d[f],a,b,c)},this.unbindEvent=function(){var a=e.toElementsArray(this);g.removeEvent(function(b){for(var d=0;d<a.length;d++)if(this===c||b.target===a[d])return!0;return!1})},this.unbindEventWithSelectorOrCallback=function(a){var f,b=e.toElementsArray(this),d=a;f="function"==typeof a?function(a){for(var e=0;e<b.length;e++)if((this===c||a.target===b[e])&&a.callback===d)return!0;return!1}:function(d){for(var e=0;e<b.length;e++)if((this===c||d.target===b[e])&&d.selector===a)return!0;return!1},g.removeEvent(f)},this.unbindEventWithSelectorAndCallback=function(a,b){var d=e.toElementsArray(this);g.removeEvent(function(e){for(var f=0;f<d.length;f++)if((this===c||e.target===d[f])&&e.selector===a&&e.callback===b)return!0;return!1})},this},h=function(){function h(a){var b={attributes:!1,childList:!0,subtree:!0};return a.fireOnAttributesModification&&(b.attributes=!0),b}function i(a,b){a.forEach(function(a){var c=a.addedNodes,d=a.target,f=[];null!==c&&c.length>0?e.checkChildNodesRecursively(c,b,k,f):"attributes"===a.type&&k(d,b,f)&&f.push({callback:b.callback,elem:node}),e.callCallbacks(f)})}function k(a,b,f){if(e.matchesSelector(a,b.selector)&&(a._id===c&&(a._id=d++),-1==b.firedElems.indexOf(a._id))){if(b.options.onceOnly){if(0!==b.firedElems.length)return;b.me.unbindEventWithSelectorAndCallback.call(b.target,b.selector,b.callback)}b.firedElems.push(a._id),f.push({callback:b.callback,elem:a})}}var f={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};j=new g(h,i);var l=j.bindEvent;return j.bindEvent=function(a,b,c){"undefined"==typeof c?(c=b,b=f):b=e.mergeArrays(f,b);var d=e.toElementsArray(this);if(b.existing){for(var g=[],h=0;h<d.length;h++)for(var i=d[h].querySelectorAll(a),j=0;j<i.length;j++)g.push({callback:c,elem:i[j]});if(b.onceOnly&&g.length)return c.call(g[0].elem);setTimeout(e.callCallbacks,1,g)}l.call(this,a,b,c)},j},i=function(){function d(a){var b={childList:!0,subtree:!0};return b}function f(a,b){a.forEach(function(a){var c=a.removedNodes,f=(a.target,[]);null!==c&&c.length>0&&e.checkChildNodesRecursively(c,b,h,f),e.callCallbacks(f)})}function h(a,b){return e.matchesSelector(a,b.selector)}var c={};k=new g(d,f);var i=k.bindEvent;return k.bindEvent=function(a,b,d){"undefined"==typeof d?(d=b,b=c):b=e.mergeArrays(c,b),i.call(this,a,b,d)},k},j=new h,k=new i;b&&m(b.fn),m(HTMLElement.prototype),m(NodeList.prototype),m(HTMLCollection.prototype),m(HTMLDocument.prototype),m(Window.prototype);var n={};return l(j,n,"unbindAllArrive"),l(k,n,"unbindAllLeave"),n}}(window,"undefined"==typeof jQuery?null:jQuery,void 0);

window.bromium = {};

window.bromium.whenTextChanges = function (element, callback) {
    var observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
            callback(mutation.target.innerText);
        });
    });

    var config = {characterData: true, subtree: true, childList: true};
    observer.observe(element, config);
};

window.bromium.notifySatisfiedBasedOnText = function (element, textTarget, condition) {
    if (element.innerText.trim() === textTarget) {
        bromium.notifySatisfiedCondition(condition);
    }

    bromium.whenTextChanges(element, function (text) {
       if (text.trim() === textTarget) {
          bromium.notifySatisfiedCondition(condition);
       }
  })
};

window.bromium.notifySatisfiedCondition = function(condition) {
    bromium.notifyCondition("http://bromium-condition-satisfied.com/", condition);
};

window.bromium.notifyNotSatisfiedCondition = function(condition) {
    bromium.notifyCondition("http://bromium-condition-not-satisfied.com/", condition);
};

window.bromium.notifyCondition = function(url, condition) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", url + '?' + condition);
    xhr.send();
};

var options = {
    existing: true,
    fireOnAttributesModification: true,
    onceOnly: false
};

var substitutionOptions = {
    existing: true,
    fireOnAttributesModification: true,
    onceOnly: true
}

window.bromium.substitutions = {};
window.bromium.substitutionHandlers = {};

window.bromium.subscribeForSubstitutionRegistration = function(variableName, callback) {
    if (!bromium.substitutionHandlers[variableName]) {
        bromium.substitutionHandlers[variableName] = [];
    }

    bromium.substitutionHandlers[variableName].push(callback);
};

window.bromium.registerSubstitution = function(variable, step, substitution) {
    var substitutionValue = '{{' + variable + '@' + step + '}}';
    console.log('Substitution: ' + substitutionValue + " => " + substitution);
    bromium.substitutions[substitutionValue] = substitution;
    bromium.emitAllSubstitutions(substitutionValue, substitution);
    bromium.sendSubstitutionRegistration(substitutionValue + '=' + substitution);
}

window.bromium.emitAllSubstitutions = function(substitutionValue, substitution) {
    bromium.substitutionHandlers[substitutionValue].forEach(function(handler) {
        handler(substitution);
    });
};

window.bromium.sendSubstitutionRegistration = function(substitution) {
    bromium.notifyCondition("http://bromium-register-substitution.com/", substitution);
};


window.bromium.stepHandlers = {};
window.bromium.onStep = function(step, callback) {
    bromium.stepHandlers[step] = callback;
};

window.bromium.triggerStep = function(step) {
    console.log('Triggering step');
    bromium.stepHandlers[step]();
};






function TypeTextInElementFoundByCssSelector(selector, text, hashCode) {
	document.arrive(selector, options, function () {
		bromium.notifySatisfiedCondition(hashCode);
	});
}
TypeTextInElementFoundByCssSelector("#user", "admin", "-1472679530");




TypeTextInElementFoundByCssSelector("#pass", "admin", "1496341852");




function ClickCssSelector(selector, hashCode) {
	document.arrive(selector, options, function () {
		bromium.notifySatisfiedCondition(hashCode);
	});
}

ClickCssSelector("#loginButton", "1677560286");

function ElementByCssToBePresent(selector, hashcode) {
	document.arrive(selector, options, function () {
		bromium.notifySatisfiedCondition(hashcode);
	});
}
ElementByCssToBePresent("#main-container", "-1537874403");







ClickCssSelector("#toolbar div[title='New']", "476620768");




TypeTextInElementFoundByCssSelector(".entity-name > input", "test1", "1904797301");




ClickCssSelector(".select-scope.bm-button", "-951467759");




ClickCssSelector("input[data-id='catalog01/en_GB']", "-1386322911");




function ClickDataId(dataId, hashCode) {
    //TODO: similar logic should be present in other actions as well
    if (dataId.startsWith('{{')) {
        bromium.subscribeForSubstitutionRegistration(dataId, function(substitutionValue) {
            document.arrive('input[data-id="' + substitutionValue + '"]', options, function () {
                bromium.notifySatisfiedCondition(hashCode);
            });
        });
    } else {
        document.arrive('input[data-id="' + dataId + '"]', options, function () {
            bromium.notifySatisfiedCondition(hashCode);
        });
	}
}

ClickDataId("catalog01/en_GB", "1145601417");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




ClickCssSelector("#toolbar-edit .save-button", "714065339");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector(".advanced-view-button", "708107319");




function SetVariableToTextOfElementWithCssSelector(variable, selector, step, hashcode) {
    bromium.onStep(step, function() {
        console.log('Handler for step ' + step + ' was triggered!');
    	document.arrive(selector, substitutionOptions, function () {
            var substitution = this.innerText.trim();
            bromium.registerSubstitution(variable, step, substitution);
    	});
    });

}
SetVariableToTextOfElementWithCssSelector("entityId", ".entity-id", "14", "-1660794812");




ClickCssSelector("#toolbar-edit .send-for-publication-button", "1181916053");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector("#toolbar div[title='New']", "476620768");




TypeTextInElementFoundByCssSelector(".entity-name > input", "test2", "1904797302");




ClickCssSelector(".select-scope.bm-button", "-951467759");




ClickCssSelector("input[data-id='catalog01/en_GB']", "-1386322911");




ClickDataId("catalog01/en_GB", "1145601417");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




ClickCssSelector("#toolbar-edit .save-button", "714065339");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector(".advanced-view-button", "708107319");




SetVariableToTextOfElementWithCssSelector("entityId", ".entity-id", "26", "-1660794812");




ClickCssSelector("#toolbar-edit .send-for-publication-button", "1181916053");




ClickCssSelector(".notification-window-close-button", "-48560758");




ClickCssSelector("input[name='searchText']", "2046246679");




TypeTextInElementFoundByCssSelector("input[name='searchText']", "test", "2074416986");




ClickCssSelector(".search-button", "1849439727");




function ClickClassByText(initialCollectorClass, text, hashCode) {
	document.arrive("." + initialCollectorClass, options, function () {
		bromium.notifySatisfiedBasedOnText(this, text, hashCode);
	});
}
ClickClassByText("menu-bar-tab", "PUBLICATION", "2083545669");




ClickClassByText("menu-bar-tab", "PUBLICATION", "2083545669");




ClickDataId("{{entityId@14}}", "1840643090");




ClickCssSelector(".publish-button", "465411512");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




ClickDataId("{{entityId@26}}", "1840674803");




ClickCssSelector(".publish-button", "465411512");




ClickCssSelector(".bm-button.modal-footer-button", "1952322946");




2018-07-11 09:16:48.282 [main] INFO  org.littleshoot.proxy.impl.DefaultHttpProxyServer - Starting proxy at address: 0.0.0.0/0.0.0.0:0
2018-07-11 09:16:48.303 [main] INFO  org.littleshoot.proxy.impl.DefaultHttpProxyServer - Proxy listening with TCP transport
2018-07-11 09:16:48.415 [main] INFO  org.littleshoot.proxy.impl.DefaultHttpProxyServer - Proxy started at address: /0:0:0:0:0:0:0:0:39127
2018-07-11 09:16:48.415 [main] INFO  com.hribol.bromium.cli.DefaultModule - Proxy running on port 39127
2018-07-11 09:16:49.219 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing loadBMLoginPage
2018-07-11 09:16:49.719 [LittleProxy-0-ClientToProxyWorker-4] INFO  com.hribol.bromium.replay.ReplayingState - Condition -1472679530 has been satisfied
2018-07-11 09:16:49.730 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 1677560286 has been satisfied
2018-07-11 09:16:49.734 [LittleProxy-0-ClientToProxyWorker-5] INFO  com.hribol.bromium.replay.ReplayingState - Condition 1496341852 has been satisfied
2018-07-11 09:16:49.785 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing TypeTextInElementFoundByCssSelector #user admin
2018-07-11 09:16:49.785 [pool-2-thread-1] INFO  com.hribol.bromium.common.replay.actions.ActionWithJSPreconditionBase - Condition TypeTextInElementFoundByCssSelector #user admin has hashcode -1472679530
2018-07-11 09:16:49.917 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing TypeTextInElementFoundByCssSelector #pass admin
2018-07-11 09:16:49.918 [pool-2-thread-1] INFO  com.hribol.bromium.common.replay.actions.ActionWithJSPreconditionBase - Condition TypeTextInElementFoundByCssSelector #pass admin has hashcode 1496341852
2018-07-11 09:16:50.059 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing ClickCssSelector #loginButton
2018-07-11 09:16:50.060 [pool-2-thread-1] INFO  com.hribol.bromium.common.replay.actions.ActionWithJSPreconditionBase - Condition ClickCssSelector #loginButton has hashcode 1677560286
2018-07-11 09:16:50.629 [LittleProxy-0-ProxyToServerWorker-0] WARN  com.hribol.bromium.common.filtering.GetHtmlFromCurrentHostPredicate - No accept header for http request /chrome/intelligence/assist/ranker/models/translate/2017/03/translate_ranker_model_20170329.pb.bin
2018-07-11 09:16:51.034 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition -1537874403 has been satisfied
2018-07-11 09:16:51.077 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2083545669 has been satisfied
2018-07-11 09:16:51.084 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2083545669 has been satisfied
2018-07-11 09:16:51.117 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 476620768 has been satisfied
2018-07-11 09:16:51.147 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 476620768 has been satisfied
2018-07-11 09:16:51.183 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2046246679 has been satisfied
2018-07-11 09:16:51.190 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2074416986 has been satisfied
2018-07-11 09:16:51.193 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 1849439727 has been satisfied
2018-07-11 09:16:51.331 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing ElementByCssToBePresent #main-container
2018-07-11 09:16:51.331 [pool-2-thread-1] INFO  com.hribol.bromium.common.replay.actions.ActionWithJSPreconditionBase - Condition ElementByCssToBePresent #main-container has hashcode -1537874403
2018-07-11 09:16:51.333 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing loadCampaignsPage
2018-07-11 09:16:51.687 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition -1537874403 has been satisfied
2018-07-11 09:16:51.708 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2083545669 has been satisfied
2018-07-11 09:16:51.712 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2083545669 has been satisfied
2018-07-11 09:16:51.772 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 476620768 has been satisfied
2018-07-11 09:16:51.803 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 476620768 has been satisfied
2018-07-11 09:16:51.834 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2046246679 has been satisfied
2018-07-11 09:16:51.845 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 2074416986 has been satisfied
2018-07-11 09:16:51.849 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 1849439727 has been satisfied
2018-07-11 09:16:51.934 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing ClickCssSelector #toolbar div[title='New']
2018-07-11 09:16:51.935 [pool-2-thread-1] INFO  com.hribol.bromium.common.replay.actions.ActionWithJSPreconditionBase - Condition ClickCssSelector #toolbar div[title='New'] has hashcode 476620768
2018-07-11 09:16:51.996 [main] INFO  com.hribol.bromium.common.replay.ActionExecutor - Executing TypeTextInElementFoundByCssSelector .entity-name > input test1
2018-07-11 09:16:51.996 [pool-2-thread-1] INFO  com.hribol.bromium.common.replay.actions.ActionWithJSPreconditionBase - Condition TypeTextInElementFoundByCssSelector .entity-name > input test1 has hashcode 1904797301
2018-07-11 09:16:52.129 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 1904797301 has been satisfied
2018-07-11 09:16:52.130 [LittleProxy-0-ClientToProxyWorker-5] INFO  com.hribol.bromium.replay.ReplayingState - Condition -951467759 has been satisfied
2018-07-11 09:16:52.133 [LittleProxy-0-ClientToProxyWorker-5] INFO  com.hribol.bromium.replay.ReplayingState - Condition 714065339 has been satisfied
2018-07-11 09:16:52.137 [LittleProxy-0-ClientToProxyWorker-5] INFO  com.hribol.bromium.replay.ReplayingState - Condition 1904797302 has been satisfied
2018-07-11 09:16:52.144 [LittleProxy-0-ClientToProxyWorker-5] INFO  com.hribol.bromium.replay.ReplayingState - Condition -951467759 has been satisfied
2018-07-11 09:16:52.147 [LittleProxy-0-ClientToProxyWorker-6] INFO  com.hribol.bromium.replay.ReplayingState - Condition 714065339 has been satisfied
2018-07-11 09:17:01.997 [pool-2-thread-1] ERROR com.hribol.bromium.common.synchronization.SignalizationBasedEventSynchronizer - Condition 1904797301 timed out! 
2018-07-11 09:17:01.997 [main] ERROR com.hribol.bromium.common.replay.ActionExecutor - Exception while executing!
com.hribol.bromium.replay.execution.WebDriverActionExecutionException: Exception during execution
	at com.hribol.bromium.common.replay.ExecutorDependencies.webDriverActionExecutionException(ExecutorDependencies.java:139) ~[classes/:?]
	at com.hribol.bromium.common.replay.ActionExecutor.execute(ActionExecutor.java:65) [classes/:?]
	at com.hribol.bromium.replay.ReplayBrowser.replay(ReplayBrowser.java:38) [classes/:?]
	at com.hribol.bromium.cli.commands.ReplayCommand.run(ReplayCommand.java:63) [classes/:?]
	at com.hribol.bromium.cli.Main.main(Main.java:59) [classes/:?]
Caused by: java.util.concurrent.TimeoutException
	at java.util.concurrent.FutureTask.get(FutureTask.java:205) ~[?:1.8.0_131]
	at com.hribol.bromium.common.replay.ActionExecutor.execute(ActionExecutor.java:63) ~[classes/:?]
	... 3 more
2018-07-11 09:17:02.073 [main] INFO  org.littleshoot.proxy.impl.DefaultHttpProxyServer - Shutting down proxy server gracefully
2018-07-11 09:17:02.073 [main] INFO  org.littleshoot.proxy.impl.DefaultHttpProxyServer - Closing all channels (graceful)
2018-07-11 09:17:02.078 [main] INFO  org.littleshoot.proxy.impl.ServerGroup - Shutting down server group event loops (graceful)
2018-07-11 09:17:04.281 [main] INFO  org.littleshoot.proxy.impl.DefaultHttpProxyServer - Done shutting down proxy server
2018-07-11 09:17:04.386 [main] INFO  com.hribol.bromium.cli.commands.ReplayCommand - Test run result TIMEOUT
